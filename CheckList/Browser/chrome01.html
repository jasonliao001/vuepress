<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一个数据包的旅程 | bxliao</title>
    <meta name="description" content="记录，分享，技术成长">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/vuepress/assets/css/0.styles.379a8785.css" as="style"><link rel="preload" href="/vuepress/assets/js/app.0ad50b13.js" as="script"><link rel="preload" href="/vuepress/assets/js/2.7cf59c07.js" as="script"><link rel="preload" href="/vuepress/assets/js/16.885f059c.js" as="script"><link rel="prefetch" href="/vuepress/assets/js/10.7051dd6d.js"><link rel="prefetch" href="/vuepress/assets/js/11.b78552fe.js"><link rel="prefetch" href="/vuepress/assets/js/12.a3f37b4e.js"><link rel="prefetch" href="/vuepress/assets/js/13.48c60c84.js"><link rel="prefetch" href="/vuepress/assets/js/14.9e1e07a4.js"><link rel="prefetch" href="/vuepress/assets/js/15.f6563af8.js"><link rel="prefetch" href="/vuepress/assets/js/17.87c57e56.js"><link rel="prefetch" href="/vuepress/assets/js/18.e66fe3ad.js"><link rel="prefetch" href="/vuepress/assets/js/19.2b4db5f2.js"><link rel="prefetch" href="/vuepress/assets/js/20.abe09e2f.js"><link rel="prefetch" href="/vuepress/assets/js/21.3b91fe73.js"><link rel="prefetch" href="/vuepress/assets/js/22.af4af1a8.js"><link rel="prefetch" href="/vuepress/assets/js/23.1fcfe0b9.js"><link rel="prefetch" href="/vuepress/assets/js/24.d7c1f4a8.js"><link rel="prefetch" href="/vuepress/assets/js/25.5121739d.js"><link rel="prefetch" href="/vuepress/assets/js/26.2818839b.js"><link rel="prefetch" href="/vuepress/assets/js/27.038138bf.js"><link rel="prefetch" href="/vuepress/assets/js/28.e093f550.js"><link rel="prefetch" href="/vuepress/assets/js/29.a161cf3a.js"><link rel="prefetch" href="/vuepress/assets/js/3.18ebda36.js"><link rel="prefetch" href="/vuepress/assets/js/30.98045800.js"><link rel="prefetch" href="/vuepress/assets/js/31.0bea32d9.js"><link rel="prefetch" href="/vuepress/assets/js/32.9a1237d0.js"><link rel="prefetch" href="/vuepress/assets/js/33.ddac3cbe.js"><link rel="prefetch" href="/vuepress/assets/js/34.1a746ae0.js"><link rel="prefetch" href="/vuepress/assets/js/35.6a085065.js"><link rel="prefetch" href="/vuepress/assets/js/36.b095d317.js"><link rel="prefetch" href="/vuepress/assets/js/37.e495042e.js"><link rel="prefetch" href="/vuepress/assets/js/38.741b638e.js"><link rel="prefetch" href="/vuepress/assets/js/39.f5a3030f.js"><link rel="prefetch" href="/vuepress/assets/js/4.bd5ca72f.js"><link rel="prefetch" href="/vuepress/assets/js/40.3d6f9139.js"><link rel="prefetch" href="/vuepress/assets/js/41.df7b5653.js"><link rel="prefetch" href="/vuepress/assets/js/42.27050bb2.js"><link rel="prefetch" href="/vuepress/assets/js/43.b57cfb1a.js"><link rel="prefetch" href="/vuepress/assets/js/44.c3831e0d.js"><link rel="prefetch" href="/vuepress/assets/js/45.2584058d.js"><link rel="prefetch" href="/vuepress/assets/js/46.e3f413fd.js"><link rel="prefetch" href="/vuepress/assets/js/47.80a9ca21.js"><link rel="prefetch" href="/vuepress/assets/js/48.62d46beb.js"><link rel="prefetch" href="/vuepress/assets/js/49.11254305.js"><link rel="prefetch" href="/vuepress/assets/js/5.22c734f0.js"><link rel="prefetch" href="/vuepress/assets/js/50.f4596a9b.js"><link rel="prefetch" href="/vuepress/assets/js/51.f1332ae8.js"><link rel="prefetch" href="/vuepress/assets/js/52.a9c597c8.js"><link rel="prefetch" href="/vuepress/assets/js/53.46cf4878.js"><link rel="prefetch" href="/vuepress/assets/js/54.5fb2dd96.js"><link rel="prefetch" href="/vuepress/assets/js/55.3f528df2.js"><link rel="prefetch" href="/vuepress/assets/js/56.5b4f961b.js"><link rel="prefetch" href="/vuepress/assets/js/57.a9ff1efc.js"><link rel="prefetch" href="/vuepress/assets/js/58.6233a362.js"><link rel="prefetch" href="/vuepress/assets/js/59.72925434.js"><link rel="prefetch" href="/vuepress/assets/js/6.a7451eec.js"><link rel="prefetch" href="/vuepress/assets/js/60.60f12184.js"><link rel="prefetch" href="/vuepress/assets/js/61.b887e966.js"><link rel="prefetch" href="/vuepress/assets/js/62.70d1255f.js"><link rel="prefetch" href="/vuepress/assets/js/7.e2975a0c.js"><link rel="prefetch" href="/vuepress/assets/js/8.69ee3e3f.js"><link rel="prefetch" href="/vuepress/assets/js/9.1c6ab7d2.js">
    <link rel="stylesheet" href="/vuepress/assets/css/0.styles.379a8785.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress/" class="home-link router-link-active"><!----> <span class="site-name">bxliao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress/SiteNav/recommend.html" class="nav-link">
  网址导航
</a></div><div class="nav-item"><a href="/vuepress/CheckList/Javascript/grammar.html" class="nav-link">
  前端大全
</a></div><div class="nav-item"><a href="/vuepress/Node/basic.html" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/vuepress/Computer/Linux.html" class="nav-link">
  计算机知识
</a></div><div class="nav-item"><a href="/vuepress/Algorithm/DataStruct.html" class="nav-link">
  设计模式与算法
</a></div><div class="nav-item"><a href="/vuepress/About.html" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress/SiteNav/recommend.html" class="nav-link">
  网址导航
</a></div><div class="nav-item"><a href="/vuepress/CheckList/Javascript/grammar.html" class="nav-link">
  前端大全
</a></div><div class="nav-item"><a href="/vuepress/Node/basic.html" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/vuepress/Computer/Linux.html" class="nav-link">
  计算机知识
</a></div><div class="nav-item"><a href="/vuepress/Algorithm/DataStruct.html" class="nav-link">
  设计模式与算法
</a></div><div class="nav-item"><a href="/vuepress/About.html" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Browser</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress/CheckList/Browser/chrome.html" class="sidebar-link">Chrome发展历程</a></li><li><a href="/vuepress/CheckList/Browser/router.html" class="sidebar-link">路由变迁</a></li><li><a href="/vuepress/CheckList/Browser/chrome01.html" class="active sidebar-link">数据交流</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress/CheckList/Browser/chrome02.html" class="sidebar-link">渲染流程</a></li><li><a href="/vuepress/CheckList/Browser/chrome03.html" class="sidebar-link">V8 工作原理</a></li><li><a href="/vuepress/CheckList/Browser/chrome04.html" class="sidebar-link">Javascript 执行机制</a></li><li><a href="/vuepress/CheckList/Browser/chrome05.html" class="sidebar-link">页面循环系统</a></li><li><a href="/vuepress/CheckList/Browser/ajax.html" class="sidebar-link">网络请求</a></li><li><a href="/vuepress/CheckList/Browser/window.html" class="sidebar-link">Window</a></li><li><a href="/vuepress/CheckList/Browser/dom.html" class="sidebar-link">Dom</a></li><li><a href="/vuepress/CheckList/Browser/event.html" class="sidebar-link">Event</a></li><li><a href="/vuepress/CheckList/Browser/other.html" class="sidebar-link">其他</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端规范</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端框架</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="一个数据包的旅程"><a href="#一个数据包的旅程" class="header-anchor">#</a> 一个数据包的旅程</h3> <p><strong>互联网中的数据是通过数据包来传输的，数据包在传输过程中容易丢失或出错</strong>。</p> <p>IP 负责把数据包送达目的主机。</p> <p>UDP 负责把数据包送达具体应用。</p> <p>TCP 保证了数据完整地传输。</p> <h4 id="协议"><a href="#协议" class="header-anchor">#</a> 协议</h4> <blockquote><p>一套众所周知的规则和标准，如果各方都同意使用，那么它们之间的通信将变得毫无障碍。</p></blockquote> <h4 id="ip-把数据包送达目的主机"><a href="#ip-把数据包送达目的主机" class="header-anchor">#</a> IP:把数据包送达目的主机</h4> <blockquote><p>数据包要在互联网上进行传输，就要符合<strong>网际协议</strong>(Internet Protocol，简称<strong>IP</strong>)标准，计算机的地址就称为 IP 地址，访问任何网站实际上只是你的计算机向另外一台计算机请求信息。</p></blockquote> <h4 id="udp-把数据包送达应用程序"><a href="#udp-把数据包送达应用程序" class="header-anchor">#</a> UDP:把数据包送达应用程序</h4> <blockquote><p>用户数据包协议(User Datagram Protocol)，简称UDP，IP 通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序。</p></blockquote> <h4 id="tcp-把数据完整地送达应用程序"><a href="#tcp-把数据完整地送达应用程序" class="header-anchor">#</a> TCP:把数据完整地送达应用程序</h4> <blockquote><p>TCP(Transmission Control Protocol，传输控制 协议)是一种面向连接的、可靠的、基于字节流的传输层通信协议。</p></blockquote> <h4 id="http-协议"><a href="#http-协议" class="header-anchor">#</a> HTTP 协议</h4> <blockquote><p>HTTP 是一种允许浏览器向服务器获取 资源的协议，是 Web 的基础，通常由浏览器发起请求，用来获取不同类型的文件，例如 HTML 文件、CSS 文件、JavaScript 文件、图片、视频等。此外，HTTP 也是浏览器使用 最广的协议</p></blockquote> <h4 id="浏览器端发起-http-请求流程"><a href="#浏览器端发起-http-请求流程" class="header-anchor">#</a> 浏览器端发起 HTTP 请求流程</h4> <p><strong>1.</strong> <strong>构建请求</strong></p> <p><strong>2.</strong> <strong>查找缓存</strong></p> <blockquote><p>在真正发起网络请求之前，浏览器会先在浏览器缓存中查询是否有要请求的文件。其中，<strong>浏</strong></p> <p><strong>览器缓存是一种在本地保存资源副本，以供下次请求时直接使用的技术</strong>。</p></blockquote> <p><strong>3.</strong> <strong>准备</strong> <strong>IP</strong> <strong>地址和端口</strong></p> <ul><li>HTTP 和 TCP 的关系？</li></ul> <p>​	首先使用<strong>HTTP 协议作为应用层协议</strong>，用来封装请求的文本信息，然后使用<strong>TCP/IP 作传输层协议</strong> 将它发到网络上，其实<strong>HTTP 的内容是通过 TCP 的传输数据阶段来实现的</strong>。</p> <ul><li>如何获取 IP 地址与端口号码？</li></ul> <p>负责把域名 和 IP 地址做一一映射关系。这套域名映射为 IP 的系统就叫做“<strong>域名系统</strong>”，简称 <strong>DNS</strong>(Domain Name System)。</p> <p><strong>第一步浏览器会请求 DNS 返回域名对应的 IP</strong>。当 然浏览器提供了<strong>DNS 数据缓存服务</strong>，如果某个域名已经解析过了，那么浏览器会缓存解析的结果，以供下次查询时直接使用，这样也会减少一次网络请求</p> <p><strong>4.</strong> <strong>等待</strong> <strong>TCP</strong> <strong>队列</strong></p> <p>Chrome 有个机制，同一个域名同时最多只能建立 6 个 TCP 连接， 如果在同一个域名下同时有 10 个请求发生，那么其中 4 个请求会进入排队等待状态，直至 进行中的请求完成,如果当前请求数量少于 6，会直接进入下一步，建立 TCP 连接.</p> <p><strong>5.</strong> <strong>建立</strong> <strong>TCP</strong> <strong>连接</strong></p> <p><strong>6.</strong> <strong>发送</strong> <strong>HTTP</strong> <strong>请求</strong></p> <p>浏览器会向服务器发送<strong>请求行</strong>，它包括了<strong>请求方法、请求 URI(Uniform Resource Identifier)和 HTTP 版本协议</strong></p> <h4 id="服务器端处理-http-请求流程"><a href="#服务器端处理-http-请求流程" class="header-anchor">#</a> <strong>服务器端处理</strong> <strong>HTTP</strong> <strong>请求流程</strong></h4> <p><strong>1.</strong> <strong>返回请求</strong></p> <p><strong>2.</strong> <strong>断开连接</strong></p> <p>一旦服务器向客户端返回了请求数据，它就要关闭 TCP 连接，如果浏览器或者服务器在其头信息中加入。</p> <p><code>Connection:Keep-Alive</code></p> <p>TCP 连接在发送后将仍然保持打开状态，这样浏览器就可以继续通过同一个 TCP 连接 发送请求。<strong>保持 TCP 连接可以省去下次请求时需要建立连接的时间，提升资源加载速度</strong></p> <p><strong>3.</strong> <strong>重定向</strong></p> <p>响应行返回的状态码是 301 或者 302，状态 301 或者 302就是告诉浏览器，我需要重定 向到另外一个网址，而需要重定向的网址正是包含在响应头的 Location 字段中，接下来， 浏览器获取 Location 字段中的地址，并使用该地址重新导航，这就是一个完整重定向的执 行流程</p> <p><strong>Rerfence:</strong></p> <p><a href="https://time.geekbang.org/column/intro/100033601" target="_blank" rel="noopener noreferrer">浏览器工作原理与实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress/CheckList/Browser/router.html" class="prev">
        路由变迁
      </a></span> <span class="next"><a href="/vuepress/CheckList/Browser/chrome02.html">
        渲染流程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress/assets/js/app.0ad50b13.js" defer></script><script src="/vuepress/assets/js/2.7cf59c07.js" defer></script><script src="/vuepress/assets/js/16.885f059c.js" defer></script>
  </body>
</html>
